{"version":3,"sources":["MainRank.js"],"names":["cc","Class","extends","Component","properties","Rank","Node","onLoad","pack_arr","i","length","loader","downloader","loadSubpackage","err","console","error","log","start","self","kvDataList","Array","push","key","value","parseInt","Math","random","sdk","setUserCloudStorage","res","update","dt","showRank","active","postMessage","scene","hideRank"],"mappings":";;;;;;AAAA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAML,GAAGM;;AADD,KAHP;;AAQL;AACAC,YAAQ,kBAAY;AAChB,YAAIC,WAAS,CAAC,QAAD,EAAU,MAAV,CAAb;AACA,aAAI,IAAIC,IAAE,CAAV,EAAYA,IAAED,SAASE,MAAvB,EAA8BD,GAA9B,EAAkC;AAC9BT,eAAGW,MAAH,CAAUC,UAAV,CAAqBC,cAArB,CAAoCL,SAASC,CAAT,CAApC,EAAgD,UAASK,GAAT,EAAa;AACzD,oBAAGA,GAAH,EAAO;AACH,2BAAOC,QAAQC,KAAR,CAAcF,GAAd,CAAP;AACH;AACDC,wBAAQE,GAAR,CAAY,mBAAZ;AACH,aALD;AAMH;AAEJ,KApBI;;AAsBLC,SAtBK,mBAsBG;AACJ,YAAIC,OAAO,IAAX;AACA;AACA,YAAIC,aAAa,IAAIC,KAAJ,EAAjB;AACAD,mBAAWE,IAAX,CAAgB,EAAEC,KAAK,MAAP,EAAeC,OAAO,UAAtB,EAAhB;AACAJ,mBAAWE,IAAX,CAAgB,EAAEC,KAAK,QAAP,EAAiBC,OAAO,EAAxB,EAAhB;AACAJ,mBAAWE,IAAX,CAAgB,EAAEC,KAAK,OAAP,EAAgBC,OAAO,KAAKC,SAASC,KAAKC,MAAL,KAAgB,KAAzB,CAA5B,EAAhB,EANI,CAM2E;AAC/EC,YAAIC,mBAAJ,CAAwBT,UAAxB,EAAoC,UAACU,GAAD,EAAS;AACzCf,oBAAQE,GAAR,CAAY,WAAZ,EAAyBa,GAAzB;AACAf,oBAAQE,GAAR,CAAY,SAAZ;AACH,SAHD;AAKH,KAlCI;;;AAoCL;AACAc,YAAQ,gBAAUC,EAAV,EAAc,CAErB,CAvCI;;AAyCL;AACAC,YA1CK,sBA0CM;AACP,aAAK5B,IAAL,CAAU6B,MAAV,GAAmB,IAAnB;AACAN,YAAIO,WAAJ,CAAgB,EAAEC,OAAO,UAAT,EAAhB,EAFO,CAEgC;AAC1C,KA7CI;AA8CLC,YA9CK,sBA8CM;AACP,aAAKhC,IAAL,CAAU6B,MAAV,GAAmB,KAAnB;AACAN,YAAIO,WAAJ,CAAgB,EAAEC,OAAO,MAAT,EAAhB,EAFO,CAE4B;AACtC;AAjDI,CAAT","file":"MainRank.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\main","sourcesContent":["//参考文档：https://github.com/pandamicro/creator-docs/blob/next/zh/publish/publish-wechatgame-sub-domain.md\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Rank: cc.Node,\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        let pack_arr=['duanan','game'];\r\n        for(let i=0;i<pack_arr.length;i++){\r\n            cc.loader.downloader.loadSubpackage(pack_arr[i],function(err){\r\n                if(err){\r\n                    return console.error(err);\r\n                }\r\n                console.log('load successfully');\r\n            })\r\n        }\r\n      \r\n    },\r\n\r\n    start() {\r\n        var self = this;\r\n        //.主域上报数据,将数据托管到微信后台                             \r\n        var kvDataList = new Array();\r\n        kvDataList.push({ key: \"nick\", value: \"nickName\" });\r\n        kvDataList.push({ key: \"avatar\", value: \"\" });\r\n        kvDataList.push({ key: \"score\", value: \"\" + parseInt(Math.random() * 10000) });//parseInt(Math.random()*1000)，必须是字符串\r\n        sdk.setUserCloudStorage(kvDataList, (res) => {\r\n            console.log('主域上报数据结果：', res)\r\n            console.log(\"数据存储成功！\");\r\n        })\r\n\r\n    },\r\n\r\n    // called every frame\r\n    update: function (dt) {\r\n\r\n    },\r\n\r\n    //1.好友排行\r\n    showRank() {\r\n        this.Rank.active = true;\r\n        sdk.postMessage({ scene: 'showRank' });//发送消息给子域\r\n    },\r\n    hideRank() {\r\n        this.Rank.active = false;\r\n        sdk.postMessage({ scene: 'hide' });//发送消息给子域\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n});\r\n"]}