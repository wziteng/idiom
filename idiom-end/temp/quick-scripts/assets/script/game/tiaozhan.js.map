{"version":3,"sources":["tiaozhan.js"],"names":["global","require","CELL_STATE","DEFAULT","HIDE","UNCHOSE","UNFILL","WRONG","RIGHT","Constants","GAME_STATE","STAND","value","gameOver","chose","Hide","a","cc","Class","extends","Component","properties","item","Node","content","gameState","default","PREPARE","type","infoLabel","Label","onLoad","fun","start","self","initBoard","JSONData","PLAYING","showInfo","roomSocket","on","console","log","num","stand","BLACK","string","nickName","WHITE","director","loadScene","win","_registerKeyEvent","i","length","children","_onTouchKeyStarts","bind","index","event","hideIndex","target","label","getChildByName","getComponent","key","NewHide","word","setWordByIndexs","setBgStateByIndex","setWordByIndex","splice","Button","node","pauseSystemEvents","j","push","emit","items","active","_registerClickEvent","EventType","TOUCH_START","_onTouchStart","sta","macthGezi","data","jsons","idiom","direction","wordList","idiomList","split","hideword","hideList","HideList","wordData","space","hideData","opacity","setHideWordByIndex","hide","hideWord","newhide","unique","setKeyWordByIndex","uniques","stringify","keys","Object","sort","b","Number","str","JSON","hasOwnProperty","hideItem","hideLabel","state","itemBg","Sprite","color","Color","fromHEX","goHome","disconnect"],"mappings":"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","file":"tiaozhan.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\game","sourcesContent":["let global = require('Global');\r\nconst CELL_STATE = {\r\n    DEFAULT: 0,\r\n    HIDE: 1,   //隐藏\r\n    UNCHOSE: 2,  //被选中，红框\r\n    UNFILL: 3,   //填了格子变黄变黄\r\n    WRONG: 4,    //填错字变红\r\n    RIGHT: 5,   //正确字变白，格子变绿\r\n};\r\nconst Constants = require('Constants');\r\nconst GAME_STATE = Constants.GAME_STATE;\r\nconst STAND = Constants.STAND;\r\nlet value = 0;\r\nlet gameOver = 0;\r\nlet chose = 0\r\nlet Hide = [];\r\nlet a = false;\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        item: cc.Node,\r\n        content: cc.Node,\r\n        gameState: {\r\n            default: GAME_STATE.PREPARE,\r\n            type: GAME_STATE\r\n        },\r\n        infoLabel: cc.Label,\r\n    },\r\n\r\n    onLoad() {\r\n        this.fun(); //判断游戏进度\r\n    },\r\n\r\n    start() {\r\n        let self = this;\r\n        self.initBoard(global.JSONData);\r\n        self.gameState = GAME_STATE.PLAYING;\r\n        self.showInfo('start game', 0);\r\n\r\n    },\r\n    fun() {\r\n        let self = this;\r\n        global.roomSocket.on('type', function (type) {\r\n            if (type === 0) {\r\n                console.log('游戏进行中');\r\n            }\r\n        })\r\n\r\n        global.roomSocket.on('bover', function (type) {\r\n            //黑棋胜\r\n            self.showInfo('game over', type);\r\n            console.log(type);\r\n            \r\n        });\r\n        global.roomSocket.on('wover', function (type) {\r\n            //白棋胜\r\n            console.log(type);\r\n            self.showInfo('game over', type);\r\n        });\r\n    },\r\n    showInfo(type, num) {\r\n        if (type === 'start game') {\r\n            if (global.stand === STAND.BLACK) {\r\n                this.infoLabel.string = global.nickName;\r\n            } else if (global.stand === STAND.WHITE) {\r\n                this.infoLabel.string = global.nickName;\r\n            }\r\n        } else if (type === 'game over') {\r\n            if (num === 1) {\r\n                cc.director.loadScene(\"tiaozhanOver\"); //切换场景\r\n                global.win = '挑战失败';\r\n\r\n            } else if (num === 2) {\r\n                cc.director.loadScene(\"tiaozhanOver\"); //切换场景\r\n                global.win = '挑战失败';\r\n\r\n            } else {\r\n                console.log('游戏结束\\n平局');\r\n                global.win = '平局';\r\n                cc.director.loadScene(\"tiaozhanOver\"); //切换场景\r\n            }\r\n        }\r\n    },\r\n\r\n    //键盘的注册事件\r\n    _registerKeyEvent() {\r\n        for (let i = 0; i < Hide.length; i++) {\r\n            let item = this.content.children[i];\r\n            item.on('touchstart', this._onTouchKeyStarts.bind(this, i), this);\r\n        }\r\n    },\r\n    _onTouchKeyStarts(index, event) {\r\n        this.hideIndex = index;\r\n        let target = event.target;\r\n        let label = target.getChildByName('New Label').getComponent(cc.Label);\r\n        let key = label.string;\r\n        let NewHide = [];\r\n        for (let i = 0; i < Hide.length; i++) {\r\n            if (Hide[i].index === chose || Hide[i].index === value) {\r\n                console.log(key);\r\n                console.log(Hide[i].word);\r\n                if (key === Hide[i].word) {\r\n                    this.setWordByIndexs(255, Hide[i].index);//显示字\r\n                    if (chose) {\r\n                        //点击跳转\r\n                        this.setBgStateByIndex(CELL_STATE.DEFAULT, chose);\r\n                        this.setWordByIndex(key, chose);//替换字\r\n                        Hide.splice(index, 1, { word: null, index: null });\r\n                        let item = this.item.children[chose].getComponent(cc.Button);\r\n                        item.node.pauseSystemEvents(true);\r\n                        //点击之后自动跳转\r\n                        for (let j = 0; j < Hide.length; j++) {\r\n                            console.log(Hide[j].word);\r\n                            if (Hide[j].word !== null) {\r\n                                NewHide.push(Hide[j]);\r\n                            }\r\n                        }\r\n                        for (let i = 0; i < NewHide.length; i++) {\r\n                            if (i + 1 === NewHide.length) {\r\n                                chose = NewHide[i].index;\r\n                            } else {\r\n                                chose = NewHide[i + 1].index;\r\n                            }\r\n                        }\r\n                        this.setBgStateByIndex(CELL_STATE.UNCHOSE, chose);\r\n                    } else if (value && value !== 0) {\r\n                        //自动跳转\r\n                        this.setWordByIndex(key, value);//替换字\r\n                        this.setBgStateByIndex(CELL_STATE.DEFAULT, value);\r\n                        let item = this.item.children[value].getComponent(cc.Button);\r\n                        item.node.pauseSystemEvents(true);\r\n                        if (i + 1 === Hide.length) {\r\n                            value = Hide[i].index;\r\n                        } else {\r\n                            value = Hide[i + 1].index;\r\n                        }\r\n                        this.setBgStateByIndex(CELL_STATE.UNCHOSE, value);\r\n                    }\r\n                    Hide.splice(index, 1, { word: null, index: null });\r\n                    gameOver = gameOver + 1;\r\n                    if (gameOver === Hide.length) {\r\n                        gameOver = 0;\r\n                        global.roomSocket.emit('type', global.stand);\r\n                    }\r\n                    let items = this.content.children[index];//正确的字消失\r\n                    items.active = false;\r\n                    return;\r\n                } else {\r\n                    if (chose) {\r\n                        this.setWordByIndex(key, chose);\r\n                        this.setWordByIndexs(255, Hide[i].index);\r\n                        this.setBgStateByIndex(CELL_STATE.WRONG, chose);\r\n                    } else {\r\n                        this.setWordByIndex(key, value);\r\n                        this.setWordByIndexs(255, Hide[i].index);\r\n                        this.setBgStateByIndex(CELL_STATE.WRONG, value);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    //给格子注册监听事件\r\n    _registerClickEvent() {\r\n        //给需要填空的格子添加监听事件\r\n        for (let i = 0; i < Hide.length; i++) {\r\n            let index = Hide[i].index;\r\n            let item = this.item.children[index].getComponent(cc.Button);  //button\r\n            item.node.on(cc.Node.EventType.TOUCH_START, this._onTouchStart.bind(this, index), this);\r\n        }\r\n    },\r\n    _onTouchStart(index, event) {\r\n        if (chose || chose === 0) {\r\n            this.setBgStateByIndex(CELL_STATE.DEFAULT, chose);\r\n            this.sta = CELL_STATE.DEFAULT;\r\n        }\r\n        this.setBgStateByIndex(CELL_STATE.DEFAULT, value);\r\n        chose = index;\r\n        this.setBgStateByIndex(CELL_STATE.UNCHOSE, chose);\r\n        value = 0;\r\n        console.log(index);\r\n        if (this.sta === CELL_STATE.RIGHT) {\r\n            this.setWordByIndexs(255, index);\r\n        } else {\r\n            this.setWordByIndexs(0, index);  //撤销填上去的字\r\n        }\r\n    },\r\n    //选者格子自动跳转\r\n    macthGezi(index) {\r\n        this.value = index;\r\n        this.setBgStateByIndex(CELL_STATE.UNCHOSE, index);\r\n    },\r\n    //初始化棋盘，显示所有成语\r\n    initBoard(data) {\r\n        let jsons = data;\r\n        for (let i = 0; i < jsons.length; i++) {\r\n            let idiom = jsons[i].idiom;\r\n            let direction = jsons[i].direction;\r\n            let index = jsons[i].index;\r\n            let wordList = [];\r\n            let idiomList = idiom.split('');\r\n            let hideword = jsons[i].hideword;\r\n            let hideList = [];\r\n            let HideList = hideword.split('');\r\n            for (let j = 0; j < idiomList.length; j++) {\r\n                //成语\r\n                let wordData = {};\r\n                let space = (direction === 1 ? 1 : 9);\r\n                wordData.index = index + space * j;\r\n                wordData.word = idiomList[j];\r\n                let hideData = {};\r\n                hideData.word = HideList[j];\r\n                wordList.push(wordData);\r\n                //缺少的字和成语中的字匹配就把这个字和坐标存储在hide list中\r\n                if (wordList[j].word === HideList[j]) {\r\n                    hideData.hideIndex = wordList[j].index;\r\n                    hideList.push(hideData);\r\n                }\r\n            }\r\n            jsons[i].wordList = wordList;\r\n            jsons[i].hideList = hideList;\r\n        }\r\n        console.log(jsons);\r\n        //隐藏格子上的所有文字\r\n        for (let i = 0; i < this.item.children.length; i++) {\r\n            this.item.children[i].opacity = 0\r\n        }\r\n        //显示文字\r\n        for (let i = 0; i < jsons.length; i++) {\r\n            for (let j = 0; j < jsons[i].wordList.length; j++) {\r\n                let wordData = jsons[i].wordList[j];\r\n                this.item.children[wordData.index].opacity = 255;\r\n                this.setHideWordByIndex(wordData.word, wordData.index);\r\n            }\r\n        }\r\n        //隐藏键盘上的所有文字\r\n        for (let i = 0; i < this.content.children.length; i++) {\r\n            this.content.children[i].opacity = 0;\r\n        }\r\n        //隐藏的文字存在一个数组中\r\n        let hide = [];\r\n        for (let i = 0; i < jsons.length; i++) {\r\n            for (let j = 0; j < jsons[i].wordList.length; j++) {\r\n                let hideWord = jsons[i].wordList[j];\r\n                hide.push(hideWord);\r\n            }\r\n        }\r\n        let newhide = this.unique(hide);\r\n        //在键盘上显示隐藏的文字\r\n        for (let i = 0; i < newhide.length; i++) {\r\n            this.content.children[i].opacity = 255;\r\n            this.setKeyWordByIndex(newhide[i].word, i);  //显示被隐藏的字到键盘上\r\n        }\r\n        Hide = newhide;\r\n        this._registerClickEvent();\r\n        this._registerKeyEvent();\r\n        value = Hide[0].index;\r\n        this.macthGezi(value);\r\n    },\r\n    unique(hide) {\r\n        var uniques = [];\r\n        var stringify = {};\r\n        for (var i = 0; i < hide.length; i++) {\r\n            var keys = Object.keys(hide[i]);\r\n            keys.sort(function (a, b) {\r\n                return (Number(a) - Number(b));\r\n            });\r\n            var str = '';\r\n            for (var j = 0; j < keys.length; j++) {\r\n                str += JSON.stringify(keys[j]);\r\n                str += JSON.stringify(hide[i][keys[j]]);\r\n            }\r\n            if (!stringify.hasOwnProperty(str)) {\r\n                uniques.push(hide[i]);\r\n                stringify[str] = true;\r\n            }\r\n        }\r\n        uniques = uniques;\r\n        return uniques;\r\n    },\r\n    //初始化格子上和键盘上的文字\r\n    setWordByIndex(string, index) {\r\n        let item = this.item.children[index].children[0];\r\n        let label = item.getChildByName('Label').getComponent(cc.Label);\r\n        label.string = string;\r\n    },\r\n    setKeyWordByIndex(string, index) {\r\n        let items = this.content.children[index];\r\n        let item = items.getChildByName('New Label').getComponent(cc.Label);\r\n        item.string = string;\r\n    },\r\n    //隐藏需要填的文字\r\n    setHideWordByIndex(string, hideIndex) {\r\n        let hideItem = this.item.children[hideIndex].children[0];  //需要填的词index值\r\n        let hideLabel = hideItem.getChildByName('Label').getComponent(cc.Label).node;\r\n        hideLabel.opacity = 0;\r\n        hideLabel.string = string;\r\n    },\r\n    //撤销填的字的方法\r\n    setWordByIndexs(opacity, hideIndex) {\r\n        let hideItem = this.item.children[hideIndex].children[0];  //需要填的词index值\r\n        let hideLabel = hideItem.getChildByName('Label').getComponent(cc.Label).node;\r\n        hideLabel.opacity = opacity;\r\n\r\n    },\r\n    //设置背景的状态\r\n    setBgStateByIndex(state, index) {\r\n        let item = this.item.children[index].children[0];\r\n        let itemBg = item.getChildByName('New Sprite').getComponent(cc.Sprite).node;  //需要填的词index值\r\n        let color;\r\n        if (state === CELL_STATE.DEFAULT) {\r\n            color = new cc.Color().fromHEX(\"#CF9AF3\");\r\n        } else if (state === CELL_STATE.UNCHOSE) {\r\n            color = new cc.Color().fromHEX('#A095F6');  //选中\r\n        } else if (state === CELL_STATE.WRONG) {\r\n            color = new cc.Color().fromHEX('#F84C53');   //错误\r\n        } else if (state === CELL_STATE.RIGHT) {\r\n            color = new cc.Color().fromHEX('#44ECD8');   //正确\r\n        }\r\n        itemBg.color = color;\r\n    },\r\n    goHome() {\r\n        global.JSONData.splice(0, global.JSONData.length);\r\n        global.roomSocket.disconnect();\r\n        cc.director.loadScene(\"main\"); //切换场景\r\n    },\r\n    // update (dt) {},\r\n    gameOver() {\r\n        a = true;\r\n        // if (global.stand === STAND.BLACK) {\r\n        //     global.type=1;\r\n        //     global.roomSocket.emit('type',global.type);\r\n        // } else if (global.stand === STAND.WHITE) {\r\n        //     global.type=2;\r\n        //     global.roomSocket.emit('type',global.type);\r\n        // }\r\n        // this.fun();\r\n        // this.showInfo('game over');\r\n        // cc.director.loadScene(\"tiaozhanOver\"); //切换场景\r\n        // gameOver = 0;\r\n    }\r\n});\r\n"]}