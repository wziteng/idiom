{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\SDK/assets\\script\\SDK\\sdk.js"],"names":["sdk","app_name","createImage","sprite","url","cc","sys","platform","WECHAT_GAME","image","wx","onload","texture","Texture2D","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","src","postMessage","msg","message","onMessage","callback","d","setUserCloudStorage","kvDataList","KVDataList","success","res","fail","getUserCloudStorage","keyList","getGroupCloudStorage","shareTicket","getFriendCloudStorage","module","exports","window"],"mappings":"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","file":"sdk.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\SDK","sourcesContent":["var sdk = {\r\n    app_name: '',\r\n\r\n    //.加载图片\r\n    createImage(sprite,url){\r\n        //.当前运行环境是小游戏，可以调用微信api接口wx.\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            let image = wx.createImage();\r\n            image.onload = function () {\r\n                let texture = new cc.Texture2D();\r\n                texture.initWithElement(image);\r\n                texture.handleLoadedTexture();\r\n                sprite.spriteFrame = new cc.SpriteFrame(texture);\r\n            };\r\n            image.src = url;\r\n        }\r\n    },\r\n    //msg参数: Object\r\n    postMessage(msg){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.postMessage({ message: msg });\r\n        }\r\n    },\r\n    onMessage(callback){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.onMessage(function(d){\r\n                // if(d.message == \"common_back\"){//.子域: 返回子域首页\r\n                //     cc.director.loadScene(\"common_children\")\r\n                // }\r\n                callback(d)\r\n            });\r\n        }\r\n    },\r\n    //.主域上报数据:    对用户托管数据进行写数据操作，允许同时写多组 KV 数据。\r\n    setUserCloudStorage(kvDataList, callback){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.setUserCloudStorage({\r\n                KVDataList: kvDataList,\r\n                success(res){\r\n                    callback(res)\r\n                },\r\n                fail(res){\r\n                    callback(res)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    //.获取当前用户托管数据当中对应 key 的数据。该接口只可在开放数据域下使用\r\n    getUserCloudStorage(keyList, callback){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.getUserCloudStorage({\r\n                keyList: keyList,\r\n                success(res){\r\n                    callback(res)\r\n                },\r\n                fail(res){\r\n                    callback(res)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    //.在小游戏是通过群分享卡片打开的情况下，可以通过调用该接口获取群同玩成员的游戏数据。该接口只可在开放数据域下使用。\r\n    getGroupCloudStorage(shareTicket, keyList, callback){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.getGroupCloudStorage({\r\n                shareTicket: shareTicket,\r\n                keyList: keyList,\r\n                success(res){\r\n                    callback(res)\r\n                },\r\n                fail(res){\r\n                    callback(res)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    //.拉取当前用户所有同玩好友的托管数据。该接口只可在开放数据域下使用\r\n    getFriendCloudStorage(keyList, callback){\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            wx.getFriendCloudStorage({\r\n                keyList: keyList,\r\n                success(res){\r\n                    callback(res)\r\n                },\r\n                fail(res){\r\n                    callback(res)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    \r\n\r\n\r\n    \r\n}\r\nmodule.exports = sdk;\r\nwindow.sdk = sdk;"]}