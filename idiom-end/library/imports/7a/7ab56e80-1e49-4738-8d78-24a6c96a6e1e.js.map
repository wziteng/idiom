{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\game/assets\\script\\game\\tiaozhanOver.js"],"names":["global","require","idioms","index","loadImages","cc","Class","extends","Component","properties","idiom","Node","tanchuang","bg","Sprite","guan","win","onLoad","self","init","JSONData","data","datas","checkpoint","getComponent","Label","string","time","wordList","i","length","pingyin","explain","idiomList","split","pingyinList","j","wordData","word","push","children","opacity","setIdiomInIndex","_registerClickEvent","item","on","_onTouchStart","bind","indexs","getChildByName","show","position","v2","top","expains","pinyin","hide","update","dt"],"mappings":"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","file":"tiaozhanOver.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\game","sourcesContent":["let global=require('Global');\r\nlet idioms = null;\r\nlet index = 0;\r\nlet loadImages=require('loadimgs');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        idiom: cc.Node,\r\n        tanchuang: cc.Node,\r\n        bg:cc.Sprite,\r\n        guan:cc.Node,\r\n        win:cc.Node,\r\n\r\n    },\r\n\r\n    onLoad() {\r\n        let self = this;\r\n        self.init(global.JSONData);\r\n        loadImages.loadImages('bg','bg_gradient_mask',self.bg);\r\n    },\r\n    init(data) {\r\n        let datas = data;\r\n        let checkpoint = this.guan.getComponent(cc.Label);\r\n        let win = this.win.getComponent(cc.Label);\r\n        checkpoint.string = global.time;\r\n        win.string = global.win;\r\n        let wordList = [];\r\n        for (let i = 0; i < datas.length; i++) {\r\n            let idiom = datas[i].idiom;  //成语\r\n            let pingyin = datas[i].pingyin;\r\n            let explain = datas[i].explain;\r\n            let wordList = [];\r\n            let idiomList = idiom.split('');\r\n            let pingyinList = pingyin.split('|');\r\n            for (let j = 0; j < idiomList.length; j++) {\r\n                //成语\r\n                let wordData = {};\r\n                wordData.word = idiomList[j];\r\n                wordData.pingyin = pingyinList[j];\r\n                wordList.push(wordData);\r\n            }\r\n            datas[i].wordList = wordList;\r\n        }\r\n        // console.log(datas);\r\n        idioms = datas;  //赋值给全局变量\r\n        //隐藏所有成语\r\n        for (let i = 0; i < this.idiom.children.length; i++) {\r\n            this.idiom.children[i].opacity = 0;\r\n        }\r\n        //显示本关的成语\r\n        //在键盘上显示隐藏的文字\r\n        for (let i = 0; i < datas.length; i++) {\r\n            this.idiom.children[i].opacity = 255;\r\n            this.setIdiomInIndex(datas[i].idiom, i);\r\n        }\r\n        this._registerClickEvent();\r\n    },\r\n    _registerClickEvent() {\r\n        //给需要填空的格子添加监听事件\r\n        // console.log()\r\n        for (let i = 0; i < idioms.length; i++) {\r\n            let item = this.idiom.children[i];\r\n            item.on('touchstart', this._onTouchStart.bind(this, i), this);\r\n        }\r\n    },\r\n    _onTouchStart(indexs) {\r\n        index = indexs;\r\n        // console.log(index);\r\n    },\r\n\r\n    //显示本关中的成语\r\n    setIdiomInIndex(string, index) {\r\n        let idioms = this.idiom.children[index].children[0];\r\n        let idiom = idioms.getChildByName('Label').getComponent(cc.Label);\r\n        idiom.string = string;\r\n    },\r\n\r\n\r\n    //显示弹窗\r\n    show() {\r\n        this.tanchuang.position = cc.v2(0, 0);\r\n        // console.log(index);\r\n        let top = this.tanchuang.getChildByName('top').getChildByName('right');//显示拼音的头部\r\n        let expains = this.tanchuang.getChildByName('explain').getChildByName('bottom');//释义\r\n        for (let i = 0; i < top.children.length; i++) {\r\n            let pinyin = top.children[i].children[0].getComponent(cc.Label); //拼音\r\n            let item = top.children[i].children[1].getComponent(cc.Label);  //字\r\n            let explain = expains.children[0].getComponent(cc.Label);\r\n            pinyin.string = idioms[index].wordList[i].pingyin;\r\n            item.string = idioms[index].wordList[i].word;\r\n            explain.string = idioms[index].explain;\r\n        }\r\n    },\r\n    hide() {\r\n        this.tanchuang.position = cc.v2(2000, 0);\r\n    },\r\n    // start () {},\r\n    update(dt) {\r\n\r\n    }\r\n});\r\n"]}